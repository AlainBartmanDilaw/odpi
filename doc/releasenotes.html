<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ODPI-C Release notes &#8212; ODPI-C v2.0.3</title>
    
    <link rel="stylesheet" href="_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v2.0.3" href="index.html" />
    <link rel="next" title="Licenses" href="license.html" />
    <link rel="prev" title="ODPI-C Installation" href="installation.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <div class="section" id="odpi-c-release-notes">
<h1>ODPI-C Release notes<a class="headerlink" href="#odpi-c-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="version-2-0-3-november-6-2017">
<h2>Version 2.0.3 (November 6, 2017)<a class="headerlink" href="#version-2-0-3-november-6-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Prevent use of unitialized data in certain cases (<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/77">cx_Oracle issue 77</a>).</li>
<li>Attempting to ping a database earlier than 10g results in error &#8220;ORA-1010:
invalid OCI operation&#8221;, but that implies a response from the database and
therefore a successful ping, so treat it that way!</li>
<li>Some values represented as double do not convert perfectly to float; use
FLT_EPSILON to check the difference between the two after conversion,
rather than expect the values to convert perfectly.</li>
<li>Prevent use of NaN with Oracle numbers since it produces corrupt data
(<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/91">cx_Oracle issue 91</a>).</li>
<li>Verify that Oracle objects bound to cursors, fetched from cursors, set in
object attributes or appended to collection objects are of the correct
type.</li>
<li>Correct handling of NVARCHAR2 when used as attributes of Oracle objects or
elements of collections
(<a class="reference external" href="https://github.com/oracle/odpi/issues/45">issue 45</a>).</li>
</ol>
</div>
<div class="section" id="version-2-0-2-august-30-2017">
<h2>Version 2.0.2 (August 30, 2017)<a class="headerlink" href="#version-2-0-2-august-30-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Don&#8217;t prevent connection from being explicitly closed when a fatal error
has taken place (<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/67">cx_Oracle issue 67</a>).</li>
<li>Correct handling of objects when dynamic binding is performed.</li>
<li>Process deregistration events without an error.</li>
<li>Eliminate memory leak when calling dpiObjectType_createObject().</li>
</ol>
</div>
<div class="section" id="version-2-0-1-august-18-2017">
<h2>Version 2.0.1 (August 18, 2017)<a class="headerlink" href="#version-2-0-1-august-18-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Ensure that any allocated statement increments the open child count
(<a class="reference external" href="https://github.com/oracle/odpi/issues/27">issue 27</a>).</li>
<li>Correct parameter subscrId to <a class="reference internal" href="public_functions/dpiConn.html#c.dpiConn_newSubscription" title="dpiConn_newSubscription"><code class="xref c c-func docutils literal"><span class="pre">dpiConn_newSubscription()</span></code></a> as
<a class="reference external" href="https://github.com/oracle/odpi/issues/28">noted</a>. There is no OCI
documentation for this attribute and should never have been exposed. The
parameter is therefore deprecated and will be removed in version 2.1. The
value NULL can now also be passed to this parameter.</li>
<li>Add script for running valgrind and correct issues found in test suite
reported by valgrind
(<a class="reference external" href="https://github.com/oracle/odpi/issues/29">issue 29</a>).</li>
<li>Use posix_spawn() instead of system() in the test suite, as requested
(<a class="reference external" href="https://github.com/oracle/odpi/issues/30">issue 30</a>).</li>
<li>Add support for DML returning statements that require dynamically allocated
variable data (such as CLOBs being returned as strings).</li>
</ol>
</div>
<div class="section" id="version-2-0-0-august-14-2017">
<h2>Version 2.0.0 (August 14, 2017)<a class="headerlink" href="#version-2-0-0-august-14-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added new structure <a class="reference internal" href="public_structs/dpiDataTypeInfo.html#dpidatatypeinfo"><span class="std std-ref">dpiDataTypeInfo</span></a> and modified
structures <a class="reference internal" href="public_structs/dpiQueryInfo.html#dpiqueryinfo"><span class="std std-ref">dpiQueryInfo</span></a>,
<a class="reference internal" href="public_structs/dpiObjectAttrInfo.html#dpiobjectattrinfo"><span class="std std-ref">dpiObjectAttrInfo</span></a> and
<a class="reference internal" href="public_structs/dpiObjectTypeInfo.html#dpiobjecttypeinfo"><span class="std std-ref">dpiObjectTypeInfo</span></a> in order to add support for
fractional seconds precision on timestamps and interval day to second
values (<a class="reference external" href="https://github.com/oracle/odpi/issues/22">issue 22</a>) and to
support additional metadata on object types and attributes
(<a class="reference external" href="https://github.com/oracle/odpi/issues/23">issue 23</a>).</li>
<li>Prevent closing the connection when there are any open statements or LOBs
and add new error &#8220;DPI-1054: connection cannot be closed when open
statements or LOBs exist&#8221; when this situation is detected; this is needed
to prevent crashes under certain conditions when statements or LOBs are
being acted upon while at the same time (in another thread) a connection is
being closed; it also prevents leaks of statements and LOBs when a
connection is returned to a session pool.</li>
<li>Added support for binding by value for rowids in
<a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_bindValueByPos" title="dpiStmt_bindValueByPos"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_bindValueByPos()</span></code></a> and <a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_bindValueByName" title="dpiStmt_bindValueByName"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_bindValueByName()</span></code></a>.</li>
<li>On platforms other than Windows, if the regular method for loading the
Oracle Client libraries fails, try using $ORACLE_HOME/lib/libclntsh.so
(<a class="reference external" href="https://github.com/oracle/odpi/issues/20">issue 20</a>).</li>
<li>Use the environment variable DPI_DEBUG_LEVEL at runtime, not compile time,
to add in <a class="reference internal" href="user_guide/debugging.html#debugging"><span class="std std-ref">debugging</span></a>.</li>
<li>Added support for DPI_DEBUG_LEVEL_ERRORS (reports errors and has the value
8) and DPI_DEBUG_LEVEL_SQL (reports prepared SQL statement text and has the
value 16) in order to further improve the ability to debug issues.</li>
<li>Ensure that any prefetch activities are performed prior to performing the
fetch in <a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_scroll" title="dpiStmt_scroll"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_scroll()</span></code></a>.</li>
<li>Provide means of disabling thread cleanup for situations where threads are
created at startup and never terminated (such as takes place with Node.js).</li>
<li>Add script sql/TestEnv.sql and read environment variables during test
execution in order to simplify the running of tests.</li>
<li>Add script sql/SampleEnv.sql and read environment variables during sample
execution in order to simplify the running of samples.</li>
<li>Adjust Makefile for tests and samples
(<a class="reference external" href="https://github.com/oracle/odpi/issues/24">issue 24</a>).</li>
<li>Added additional test cases.</li>
<li>Documentation improvements.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-rc-2-july-20-2017">
<h2>Version 2.0.0-rc.2 (July 20, 2017)<a class="headerlink" href="#version-2-0-0-rc-2-july-20-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Improved error messages when initial OCI environment cannot be created.</li>
<li>On Windows, convert system message to Unicode first, then to UTF-8;
otherwise, the error message returned could be in a mix of encodings.</li>
<li>Added support for converting from text to number in object attributes and
collection element values.</li>
<li>Added checks on all pointers to ensure they are not NULL.</li>
<li>Added checks on all pointer/length combinations to ensure that they are not
NULL and non-zero at the same time.</li>
<li>Ensure that the thread specific errors are freed properly.</li>
<li>Corrected handling of connections using DRCP.</li>
<li>Corrected issue where error getting a pooled connection was masked by
error &#8220;DPI-1002: invalid OCI handle&#8221;.</li>
<li>PL/SQL boolean values are not supported until Oracle Client 12.1 so raise
an unsupported error if an attempt is made to use them in Oracle Client
11.2.</li>
<li>Allow the parameter numQueryColumns to be null in <a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_execute" title="dpiStmt_execute"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_execute()</span></code></a>
as a convenience to those who do not require that information.</li>
<li>Added url fragment and whether a 32-bit or 64-bit library is expected to
error &#8220;DPI-1047: Oracle Client library cannot be loaded&#8221; in order to
improve the help provided.</li>
<li>Added prefix &#8220;ODPI: &#8221; to start of all debug messages to aid in
differentiating between them and other messages in log files.</li>
<li>Added additional test cases.</li>
<li>Documentation improvements.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-rc-1-june-16-2017">
<h2>Version 2.0.0-rc.1 (June 16, 2017)<a class="headerlink" href="#version-2-0-0-rc-1-june-16-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>OCI requires that both <a class="reference internal" href="public_structs/dpiCommonCreateParams.html#c.dpiCommonCreateParams.encoding" title="dpiCommonCreateParams.encoding"><code class="xref c c-member docutils literal"><span class="pre">encoding</span></code></a>
and <a class="reference internal" href="public_structs/dpiCommonCreateParams.html#c.dpiCommonCreateParams.nencoding" title="dpiCommonCreateParams.nencoding"><code class="xref c c-member docutils literal"><span class="pre">nencoding</span></code></a> have values or that both
encoding and encoding do not have values. The missing value is set to its
default value if one of the values is set and the other is not
(<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/36">issue 36</a>).</li>
<li>Add optimization when client and server character sets are identical; in
that case the size in bytes reported by the server is sufficient to hold
the data that will be transferred from the server and there is no need to
expand the buffer for character strings.</li>
<li>Corrected handling of BFILE LOBs.</li>
<li>Eliminated errors and warnings when using AIX compiler.</li>
<li>Documentation improvements.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-beta-4-may-24-2017">
<h2>Version 2.0.0-beta.4 (May 24, 2017)<a class="headerlink" href="#version-2-0-0-beta-4-may-24-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Added support for getting/setting attributes of objects or element values
in collections that contain LOBs, BINARY_FLOAT values, BINARY_DOUBLE values
and NCHAR and NVARCHAR2 values. The error message for any types that are
not supported has been improved as well.</li>
<li>Enabled temporary LOB caching in order to avoid disk I/O as
<a class="reference external" href="https://github.com/oracle/odpi/issues/10">suggested</a>.</li>
<li>Changed default native type to DPI_ORACLE_TYPE_INT64 if the column metadata
indicates that the values are able to fit inside a 64-bit integer.</li>
<li>Added function <a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_defineValue" title="dpiStmt_defineValue"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_defineValue()</span></code></a>, which gives the application
the opportunity to specify the data type to use for fetching without having
to create a variable.</li>
<li>Added constant DPI_DEBUG_LEVEL as a set of bit flags which result in
messages being printed to stderr. The following levels are defined:<ul>
<li>0x0001 - reports errors during free operations</li>
<li>0x0002 - reports on reference count changes</li>
<li>0x0004 - reports on public function calls</li>
</ul>
</li>
<li>An empty string is just as acceptable as NULL when enabling external
authentication in <a class="reference internal" href="public_functions/dpiPool.html#c.dpiPool_create" title="dpiPool_create"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_create()</span></code></a>.</li>
<li>Avoid changing the OCI actual length values for fixed length types in order
to prevent error &#8220;ORA-01458: invalid length inside variable character
string&#8221;.</li>
<li>Ensured that the length set in the dpiBytes structure by the caller is
passed through to the actual length buffer used by OCI.</li>
<li>Added missing documentation for function <a class="reference internal" href="public_functions/dpiVar.html#c.dpiVar_setFromBytes" title="dpiVar_setFromBytes"><code class="xref c c-func docutils literal"><span class="pre">dpiVar_setFromBytes()</span></code></a>.</li>
<li>Handle edge case when an odd number of zeroes trail the decimal point in a
value that is effectively zero (<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/22">cx_Oracle issue 22</a>).</li>
<li>Eliminated resource leak when a standalone connection or pool is freed.</li>
<li>Prevent attempts from binding the cursor being executed to itself.</li>
<li>Corrected determination of unique bind variable names. The function
<a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_getBindCount" title="dpiStmt_getBindCount"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_getBindCount()</span></code></a> returns a count of unique bind variable
names for PL/SQL statements only. For SQL statements, this count is the
total number of bind variables, including duplicates. The function
<a class="reference internal" href="public_functions/dpiStmt.html#c.dpiStmt_getBindNames" title="dpiStmt_getBindNames"><code class="xref c c-func docutils literal"><span class="pre">dpiStmt_getBindNames()</span></code></a> has been adjusted to return the actual
number of unique bind variable names (parameter numBindNames is now a
pointer instead of a scalar value).</li>
<li>Added additional test cases.</li>
<li>Added check for Cygwin, as <a class="reference external" href="https://github.com/oracle/odpi/issues/11">suggested</a>.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-beta-3-april-18-2017">
<h2>Version 2.0.0-beta.3 (April 18, 2017)<a class="headerlink" href="#version-2-0-0-beta-3-april-18-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Add initial set of <a class="reference external" href="https://github.com/oracle/odpi/tree/master/test">functional test cases</a>.</li>
<li>Add support for smallint and float data types in Oracle objects, as
<a class="reference external" href="https://github.com/oracle/python-cx_Oracle/issues/4">requested</a>.</li>
<li>Ensure that the actual array size is set to the number of rows returned in
a DML returning statement.</li>
<li>Remove unneeded function dpiVar_resize().</li>
<li>Improve error message when specifying an invalid array position in a
variable.</li>
<li>Add structure <a class="reference internal" href="public_structs/dpiVersionInfo.html#dpiversioninfo"><span class="std std-ref">dpiVersionInfo</span></a> to pass version
information, rather than separate parameters. This affects functions
<a class="reference internal" href="public_functions/dpiContext.html#c.dpiContext_getClientVersion" title="dpiContext_getClientVersion"><code class="xref c c-func docutils literal"><span class="pre">dpiContext_getClientVersion()</span></code></a> and
<a class="reference internal" href="public_functions/dpiConn.html#c.dpiConn_getServerVersion" title="dpiConn_getServerVersion"><code class="xref c c-func docutils literal"><span class="pre">dpiConn_getServerVersion()</span></code></a>.</li>
<li>Rename functions that use an index to identify elements in a collection to
include &#8220;ByIndex&#8221; in the name. This is clearer and also allows for
functions that may be added in the future that will identify elements by
other means. This affects functions
<a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_deleteElementByIndex" title="dpiObject_deleteElementByIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_deleteElementByIndex()</span></code></a>,
<a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_getElementExistsByIndex" title="dpiObject_getElementExistsByIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_getElementExistsByIndex()</span></code></a>,
<a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_getElementValueByIndex" title="dpiObject_getElementValueByIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_getElementValueByIndex()</span></code></a>, and
<a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_setElementValueByIndex" title="dpiObject_setElementValueByIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_setElementValueByIndex()</span></code></a>.</li>
<li>The OCI function OCITypeByFullName() is supported on a 12.1 Oracle Client
but will give the error &#8220;OCI-22351: This API is not supported by the ORACLE
server&#8221; when used against an 11.2 Oracle Database. The function
<a class="reference internal" href="public_functions/dpiConn.html#c.dpiConn_getObjectType" title="dpiConn_getObjectType"><code class="xref c c-func docutils literal"><span class="pre">dpiConn_getObjectType()</span></code></a> now checks the server version and calls the
correct routine as needed.</li>
<li>Add parameter &#8220;exists&#8221; to functions <a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_getFirstIndex" title="dpiObject_getFirstIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_getFirstIndex()</span></code></a> and
<a class="reference internal" href="public_functions/dpiObject.html#c.dpiObject_getLastIndex" title="dpiObject_getLastIndex"><code class="xref c c-func docutils literal"><span class="pre">dpiObject_getLastIndex()</span></code></a> which allow a calling program to avoid
error &#8220;OCI-22166: collection is empty&#8221;.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-beta-2-march-28-2017">
<h2>Version 2.0.0-beta.2 (March 28, 2017)<a class="headerlink" href="#version-2-0-0-beta-2-march-28-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Use dynamic loading at runtime to load the OCI library and eliminate the
need for the OCI header files to be present when building ODPI-C.</li>
<li>Improve sample Makefile as requested in <a class="reference external" href="https://github.com/oracle/odpi/issues/1">issue 1</a>.</li>
<li>Correct support for handling unsigned integers that are larger than the
maximum size that can be represented by a signed integer. This corrects
<a class="reference external" href="https://github.com/oracle/odpi/issues/3">issue 3</a>.</li>
<li>Remove type DPI_ORACLE_TYPE_LONG_NVARCHAR which is not needed as noted in
<a class="reference external" href="https://github.com/oracle/odpi/issues/5">issue 5</a>.</li>
<li>Increase size of string which can be generated from an OCI number. This
corrects <a class="reference external" href="https://github.com/oracle/odpi/issues/6">issue 6</a>.</li>
<li>Ensure that zeroing the check integer on ODPI-C handles is not optimised
away by the compiler.</li>
<li>Silence compiler warnings from the Microsoft C++ compiler.</li>
<li>Restore support for simple reference count tracing by the use of
DPI_TRACE_REFS.</li>
<li>Add additional error (ORA-56600: an illegal OCI function call was issued)
to the list of errors that cause the session to be dropped from the session
pool.</li>
<li>Changed LOB sample to include code to populate both CLOBs and BLOBs in
addition to fetching them.</li>
</ol>
</div>
<div class="section" id="version-2-0-0-beta-1-january-30-2017">
<h2>Version 2.0.0-beta.1 (January 30, 2017)<a class="headerlink" href="#version-2-0-0-beta-1-january-30-2017" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Initial release supporting the following features:<ul>
<li>11.2, 12.1 and 12.2 Oracle Client support</li>
<li>9.2 and higher Oracle Database support (depending on Oracle Client
version)</li>
<li>SQL and PL/SQL execution</li>
<li>Character datatypes (CHAR, VARCHAR2, NCHAR, NVARCHAR2, CLOB, NCLOB, LONG)</li>
<li>Numeric datatypes (NUMBER, BINARY_FLOAT, BINARY_DOUBLE)</li>
<li>Dates, Timestamps, Intervals</li>
<li>Binary types (BLOB, BFILE, RAW, LONG RAW)</li>
<li>PL/SQL datatypes (PLS_INTEGER, BOOLEAN, Collections, Records)</li>
<li>JSON</li>
<li>User Defined Types</li>
<li>REF CURSOR, Nested cursors, Implicit Result Sets</li>
<li>Array fetch</li>
<li>Array bind/execute</li>
<li>Session pools (homogeneous and non-homogeneous with proxy authentication)</li>
<li>Standalone connections</li>
<li>Database Resident Connection Pooling (DRCP)</li>
<li>External authentication</li>
<li>Statement caching (tagging)</li>
<li>End-to-end tracing, mid-tier authentication and auditing (action, module,
client identifier, client info, database operation)</li>
<li>Edition Based Redefinition</li>
<li>Scrollable cursors</li>
<li>DML RETURNING</li>
<li>Privileged connection support (SYSDBA, SYSOPER, SYSASM, PRELIM_AUTH)</li>
<li>Database Startup/Shutdown</li>
<li>Session Tagging</li>
<li>Proxy authentication</li>
<li>Batch Errors</li>
<li>Array DML Row Counts</li>
<li>Query Result Caching</li>
<li>Application Continuity (with some limitations)</li>
<li>Query Metadata</li>
<li>Password Change</li>
<li>Two Phase Commit</li>
<li>OCI Client Version and Server Version</li>
<li>Connection Validation (when acquired from session pool or DRCP)</li>
<li>Continuous Query Notification</li>
<li>Advanced Queuing</li>
<li>Easily extensible (via direct OCI calls)</li>
</ul>
</li>
</ol>
</div>
</div>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2017 Oracle and/or its affiliates.  All rights reserved.
    </div>
  </body>
</html>
